<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>श्री भैरव धाम - सदस्य परिचय पत्र जनरेटर</title>

  <!-- html2canvas for download -->
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>

  <style>
    :root{
      --orange-700: #ff7730;
      --orange-600: #ff9933;
      --text-dark: #2d2d2d;
      --card-white: #ffffff;
    }

    *{box-sizing: border-box; margin:0; padding:0;}
    html,body{height:100%}
    body{
      font-family: "Noto Sans Devanagari", "Segoe UI", Tahoma, Arial, sans-serif;
      background: linear-gradient(180deg, #fffaf7 0%, #fff3ea 100%);
      display:flex;
      align-items:center;
      justify-content:center;
      padding:28px;
    }

    .page {
      width:100%;
      max-width:1050px;
      display:flex;
      gap:26px;
      flex-direction:column;
      align-items:center;
    }

    /* Form card */
    .form-card{
      width:100%;
      background: var(--card-white);
      padding:18px;
      border-radius:12px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.08);
      border:4px solid rgba(255,151,82,0.06);
    }

    .form-top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:12px;
    }
    .form-top .title{
      font-weight:900;
      color:var(--orange-700);
      font-size:18px;
    }
    .form-top .addr{
      color:#666;
      font-weight:700;
      font-size:14px;
    }

    .form-grid{
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      align-items:flex-end;
    }

    .field{
      flex:1 1 220px;
      min-width:200px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }

    label{
      font-weight:700;
      color:var(--text-dark);
      font-size:14px;
    }

    input[type="text"], input[type="date"]{
      padding:10px 12px;
      border-radius:8px;
      border:2px solid rgba(255,151,82,0.18);
      background: #fffaf6;
      font-size:15px;
      outline:none;
    }
    input[type="text"]:focus, input[type="date"]:focus{
      box-shadow:0 6px 18px rgba(255,119,48,0.10);
      border-color: var(--orange-700);
    }

    .file-input{ display:none; }
    .file-label{
      display:inline-block;
      padding:10px 14px;
      background:var(--orange-700);
      color:white;
      border-radius:10px;
      cursor:pointer;
      font-weight:700;
      text-align:center;
    }
    .file-label:hover{ transform: translateY(-3px); }

    .buttons{
      display:flex;
      gap:12px;
      margin-top:14px;
      flex-wrap:wrap;
    }

    .btn{
      padding:12px 18px;
      border-radius:10px;
      cursor:pointer;
      border:none;
      font-weight:800;
      font-size:15px;
    }
    .btn-generate{
      background:var(--orange-700);
      color:#fff;
      box-shadow:0 8px 20px rgba(255,119,48,0.16);
    }
    .btn-download{
      background:var(--orange-600);
      color:#fff;
      display:none;
    }

    /* ID Card Styles (White with Orange borders/text) */
    .id-preview-wrap{
      width:100%;
      display:flex;
      justify-content:center;
    }

    .id-card{
      width:100%;
      max-width:820px;
      border-radius:12px;
      padding:18px;
      background: var(--card-white);
      box-shadow: 0 18px 45px rgba(0,0,0,0.12);
      border:6px solid var(--orange-700);
      position:relative;
      display:none;
    }

    .card-header{
  display:flex;
  align-items:center;
  gap:14px;
  padding:10px;
  background:#d80000; /* red background */
  color:white;
  border-bottom:4px solid #b00000;
  border-radius:10px 10px 0 0;
}


    .card-logo{
      width:88px;
      height:88px;
      border-radius:50%;
      overflow:hidden;
      flex-shrink:0;
      border:4px solid var(--orange-700);
      display:flex;
      align-items:center;
      justify-content:center;
      background: #fff;
    }
    .card-logo img{ width:100%; height:100%; object-fit:cover; display:block; }

    .card-head-text{
      flex:1;
      text-align:right;
    }
    .card-head-text h2{
	text-align:center;
  margin:0;
  font-size:36px; /* increased size */
  color:white;
  letter-spacing:0.6px;
  font-weight:900;
}
.card-head-text p{
text-align:center;
  margin:4px 0 0;
  color:#ffeaea;
  font-weight:700;
  font-size:26px; /* slightly bigger */
}


    .card-title{
      text-align:center;
      margin:12px 0;
      font-size:20px;
      font-weight:900;
      color:#b94a00;
      padding:8px 12px;
      border-radius:8px;
    }

    .card-body{
      display:flex;
      gap:14px;
      align-items:flex-start;
      padding:8px 2px 2px 2px;
      flex-wrap:wrap;
    }

    .photo-block{
      width:200px;
      min-width:160px;
      height:200px;
      border-radius:6px;
      overflow:hidden;
      border:4px solid rgba(255,151,82,0.08);
      background: #f8f8f8;
      display:flex;
      align-items:center;
      justify-content:center;
      box-shadow: 0 6px 14px rgba(0,0,0,0.06);
      flex-shrink:0;
    }
    .photo-block img{ width:100%; height:100%; object-fit:cover; display:block; }

    .details-block{
      flex:1;
      min-width:260px;
      padding:6px 8px;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .detail-row{
      display:flex;
      gap:8px;
      align-items:center;
      font-size:15px;
      color:var(--text-dark);
      background: rgba(255,255,255,0.85);
      padding:10px 12px;
      border-radius:8px;
      border-left:4px solid rgba(255,119,48,0.12);
      font-weight:700;
    }
    .detail-label{ min-width:110px; color:#7a3f12; font-weight:800 }
    .detail-value{ color:#222; font-weight:700; }

    .qr-block{
      width:160px;
      height:160px;
      border-radius:8px;
      border:3px dashed rgba(255,119,48,0.20);
      display:flex;
      align-items:center;
      justify-content:center;
      overflow:hidden;
      background:#fff;
      flex-shrink:0;
    }
    .qr-block img{ width:100%; height:100%; object-fit:cover; display:block; }

   .card-footer{
  margin-top:14px;
  text-align:center;
  font-weight:900;
  color:red;
  font-size:18px;
  padding:12px;
  background:yellow; /* red background */
  border-radius:0 0 10px 10px;
}


    @media (max-width:880px){
      .card-head-text{text-align:center}
      .card-body{ flex-direction:column; align-items:center }
      .details-block{ width:100% }
      .photo-block{ width:180px; height:180px }
    }
  </style>
</head>
<body>
  <div class="page">

    <!-- FORM -->
    <div class="form-card" role="region" aria-label="ID form">
      <div class="form-top">
        <div style=""class="title">श्री भैरव धाम सरकार सेवा मंडल - आईडी जनरेटर</div>
        <div class="addr">पता - ग्राम लोहगढ़, जिला झाँसी (उ. प्र.)</div>
      </div>

      <div class="form-grid">
        <div class="field">
          <label for="name">नाम</label>
          <input id="name" type="text" placeholder="अपना पूरा नाम दर्ज करें">
        </div>

        <div class="field">
          <label for="father">पिता का नाम</label>
          <input id="father" type="text" placeholder="पिता का नाम दर्ज करें">
        </div>

        <div class="field">
          <label for="address">पता</label>
          <input id="address" type="text" placeholder="पूरा पता दर्ज करें">
        </div>

        <div class="field">
          <label for="mobile">मोबाइल नंबर</label>
          <input id="mobile" type="text" placeholder="मोबाइल नंबर दर्ज करें">
        </div>

        <div class="field">
          <label for="date">दिनांक</label>
          <input id="date" type="date">
        </div>

        <div class="field">
          <label for="photo">फोटो (square)</label>
          <input id="photo" class="file-input" type="file" accept="image/*">
          <label for="photo" class="file-label">फोटो चुनें</label>
        </div>

      </div>

      <div class="buttons">
        <button id="generate" class="btn btn-generate">आई.डी. कार्ड जनरेट करें</button>
        <button id="download" class="btn btn-download">डाउनलोड (PNG)</button>
      </div>
    </div>

    <!-- ID PREVIEW -->
    <div class="id-preview-wrap">
      <div class="id-card" id="idCard" role="region" aria-label="Generated ID card">
        <!-- header with fixed logo (round) left and text right -->
        <div class="card-header">
          <div class="card-logo">
            <!-- default logo.png — keep this file in same folder -->
            <img id="cardLogo" src="logooo.png" alt="लोगो">
          </div>

          <div class="card-head-text">
            <h2>श्री भैरव धाम सरकार सेवा मंडल</h2>
            <p>पता - ग्राम लोहगढ़, जिला झाँसी (उ. प्र.) संपर्क:- 8103078624</p>
          </div>
        </div>

        <div class="card-title">सदस्य परिचय पत्र</div>

        <div class="card-body">
          <div class="photo-block" title="सदस्य फोटो">
            <img id="cardPhoto" src="" alt="सदस्य फोटो" style="display:none">
            <div id="photoPlaceholder" style="color:#8a6b4a;font-weight:800">फोटो यहाँ</div>
          </div>

          <div class="details-block" aria-live="polite">
            <div class="detail-row"><div class="detail-label">नाम:</div><div class="detail-value" id="cardName">—</div></div>
            <div class="detail-row"><div class="detail-label">पिता का नाम:</div><div class="detail-value" id="cardFather">—</div></div>
            <div class="detail-row"><div class="detail-label">पता:</div><div class="detail-value" id="cardAddress">—</div></div>
            <div class="detail-row"><div class="detail-label">मोबाइल:</div><div class="detail-value" id="cardMobile">—</div></div>
            <div class="detail-row"><div class="detail-label">दिनांक:</div><div class="detail-value" id="cardDate">—</div></div>
          </div>
                           
          <div class="qr-block" title="QR">
            <!-- default qr.png — keep this file in same folder -->
            <img id="cardQR" src="qqrrr.png" alt="QR">
          </div>
		  
 <div style="text-align:center;margin-left:222px">  
		<div style=" 
		  text-align:center;
		  display:flex;
      gap:8px;
      align-items:center;
      font-size:15px;
      color:var(--text-dark);
      background: rgba(255,255,255,0.85);
      padding:10px 12px;
      border-radius:8px;
      border-left:4px solid rgba(255,119,48,0.12);
      font-weight:700;">
	  
	     <div style="color: #7a3f12;">
		          पंजीकरण संख्या
         </div>	

	  JHA/00030/2022-23
	  </div>
				  </div>
        </div>
               <div class="card-footer">मानव सेवा ही हमारा धर्म है।</div>
      </div>
    </div>

  </div>

  <script>
    // Elements
    const photoInput = document.getElementById('photo');
    const generateBtn = document.getElementById('generate');
    const downloadBtn = document.getElementById('download');

    const idCard = document.getElementById('idCard');

    const cardPhoto = document.getElementById('cardPhoto');
    const photoPlaceholder = document.getElementById('photoPlaceholder');

    const cardQR = document.getElementById('cardQR');
    const cardLogo = document.getElementById('cardLogo');

    // detail fields
    const nameInput = document.getElementById('name');
    const fatherInput = document.getElementById('father');
    const addressInput = document.getElementById('address');
    const mobileInput = document.getElementById('mobile');
    const dateInput = document.getElementById('date');

    // display elements
    const cardName = document.getElementById('cardName');
    const cardFather = document.getElementById('cardFather');
    const cardAddress = document.getElementById('cardAddress');
    const cardMobile = document.getElementById('cardMobile');
    const cardDate = document.getElementById('cardDate');

    // Photo preview
    photoInput.addEventListener('change', function() {
      const file = this.files && this.files[0];
      if (!file) return;
      const reader = new FileReader();
      reader.onload = function(e) {
        cardPhoto.src = e.target.result;
        cardPhoto.style.display = 'block';
        photoPlaceholder.style.display = 'none';
      };
      reader.readAsDataURL(file);
    });

    // Format date in DD-MM-YYYY
    function formatDateForDisplay(isoDate) {
      if (!isoDate) return '';
      const d = new Date(isoDate);
      if (isNaN(d)) return isoDate;
      const dd = String(d.getDate()).padStart(2,'0');
      const mm = String(d.getMonth()+1).padStart(2,'0');
      const yyyy = d.getFullYear();
      return dd + '-' + mm + '-' + yyyy;
    }

    function isValidMobile(m) {
      const cleaned = (m||'').replace(/\D/g,'');
      return /^[0-9]{10,13}$/.test(cleaned);
    }

    // Generate
    generateBtn.addEventListener('click', function() {
      const name = nameInput.value.trim();
      const father = fatherInput.value.trim();
      const address = addressInput.value.trim();
      const mobile = mobileInput.value.trim();
      const date = dateInput.value;

      if (!name || !father || !address || !mobile || !date) {
        alert('कृपया सभी जानकारी भरें: नाम, पिता का नाम, पता, मोबाइल और दिनांक।');
        return;
      }

      if (!isValidMobile(mobile)) {
        const ok = confirm('मोबाइल नंबर सही नहीं लग रहा। क्या आप जारी रखना चाहते हैं?');
        if (!ok) return;
      }

      cardName.textContent = name;
      cardFather.textContent = father;
      cardAddress.textContent = address;
      cardMobile.textContent = mobile;
      cardDate.textContent = formatDateForDisplay(date);

      // Ensure defaults are visible: logo.png and qr.png are static and already in src attributes.
      // Photo
      if (cardPhoto.src && cardPhoto.src !== '') {
        cardPhoto.style.display = 'block';
        photoPlaceholder.style.display = 'none';
      } else {
        cardPhoto.style.display = 'none';
        photoPlaceholder.style.display = 'block';
      }

      // Show card & download
      idCard.style.display = 'block';
      downloadBtn.style.display = 'inline-block';
      idCard.scrollIntoView({behavior:'smooth', block:'center'});
    });

    // Download using html2canvas
    downloadBtn.addEventListener('click', function() {
      // Increase scale for better resolution
      const scale = 2;
      html2canvas(idCard, { scale: scale, useCORS: true, backgroundColor: null })
        .then(canvas => {
          const link = document.createElement('a');
          link.download = 'bhairav-dham-id-card.png';
          link.href = canvas.toDataURL('image/png');
          link.click();
        })
        .catch(err => {
          console.error(err);
          alert('डाउनलोड में समस्या हुई — कृपया ब्राउज़र के कंसोल में देखें।');
        });
    });

    // Prevent form submit on Enter
    const inputs = document.querySelectorAll('input');
    inputs.forEach(i => i.addEventListener('keydown', e => {
      if (e.key === 'Enter') e.preventDefault();
    }));
  </script>
</body>
</html>




